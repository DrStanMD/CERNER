<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>PHQ-9 Questionnaire</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      max-width: 800px;
    }

    h2 {
      margin-bottom: 10px;
    }

    .question {
      margin-bottom: 20px;
    }

    .question strong {
      display: block;
      margin-bottom: 8px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-left: 20px;
    }

    label input {
      margin-right: 10px;
    }

    button {
      padding: 8px 16px;
      margin-top: 20px;
    }

    .summary {
      margin-top: 30px;
      border-top: 1px solid #999;
      padding-top: 15px;
    }

    #copy-output {
      width: 100%;
      height: 160px;
      font-family: monospace;
      margin-top: 10px;
      cursor: pointer;
    }

    #copy-alert {
      color: green;
      font-size: 0.9em;
      display: none;
      margin-top: 5px;
    }

    .textbox-title {
      font-weight: bold;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h2>PHQ-9 Questionnaire</h2>
  <p><strong>Instructions:</strong> Over the last 2 weeks, how often have you been bothered by the following problems?</p>

  <form id="phq9">
    <!-- Questions 1 to 9 -->
    <div class="question" id="q1">
      <strong>1. Little interest or pleasure in doing things</strong>
      <div class="options">
        <label><input type="radio" name="q1" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q1" value="1"> Several days (1)</label>
        <label><input type="radio" name="q1" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q1" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <div class="question" id="q2">
      <strong>2. Feeling down, depressed, or hopeless</strong>
      <div class="options">
        <label><input type="radio" name="q2" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q2" value="1"> Several days (1)</label>
        <label><input type="radio" name="q2" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q2" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <div class="question" id="q3">
      <strong>3. Trouble falling or staying asleep, or sleeping too much</strong>
      <div class="options">
        <label><input type="radio" name="q3" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q3" value="1"> Several days (1)</label>
        <label><input type="radio" name="q3" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q3" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <div class="question" id="q4">
      <strong>4. Feeling tired or having little energy</strong>
      <div class="options">
        <label><input type="radio" name="q4" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q4" value="1"> Several days (1)</label>
        <label><input type="radio" name="q4" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q4" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <div class="question" id="q5">
      <strong>5. Poor appetite or overeating</strong>
      <div class="options">
        <label><input type="radio" name="q5" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q5" value="1"> Several days (1)</label>
        <label><input type="radio" name="q5" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q5" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <div class="question" id="q6">
      <strong>6. Feeling bad about yourself—or that you are a failure or have let yourself or your family down</strong>
      <div class="options">
        <label><input type="radio" name="q6" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q6" value="1"> Several days (1)</label>
        <label><input type="radio" name="q6" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q6" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <div class="question" id="q7">
      <strong>7. Trouble concentrating on things</strong>
      <div class="options">
        <label><input type="radio" name="q7" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q7" value="1"> Several days (1)</label>
        <label><input type="radio" name="q7" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q7" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <div class="question" id="q8">
      <strong>8. Moving or speaking slowly / fidgety or restless</strong>
      <div class="options">
        <label><input type="radio" name="q8" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q8" value="1"> Several days (1)</label>
        <label><input type="radio" name="q8" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q8" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <div class="question" id="q9">
      <strong>9. Thoughts that you would be better off dead, or of hurting yourself</strong>
      <div class="options">
        <label><input type="radio" name="q9" value="0"> Not at all (0)</label>
        <label><input type="radio" name="q9" value="1"> Several days (1)</label>
        <label><input type="radio" name="q9" value="2"> More than half the days (2)</label>
        <label><input type="radio" name="q9" value="3"> Nearly every day (3)</label>
      </div>
    </div>

    <button type="button" onclick="scorePHQ9()">Calculate Score</button>

    <div class="summary">
      <div class="textbox-title">Double-click the box below to copy to clipboard:</div>
      <textarea id="copy-output" ondblclick="copyToClipboard(this)"></textarea>
      <div id="copy-alert">✔ Copied to clipboard</div>
    </div>
  </form>

  <script>
    function scorePHQ9() {
      let total = 0;
      let unanswered = false;
      let answers = [];

      for (let i = 1; i <= 9; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (!selected) {
          unanswered = true;
          break;
        }
        total += parseInt(selected.value);
        answers.push(`Q${i}: ${selected.parentElement.innerText}`);
      }

      if (unanswered) {
        alert("Please complete all 9 questions.");
        return;
      }

      let interpretation = '';
      if (total <= 4) interpretation = 'Minimal depression';
      else if (total <= 9) interpretation = 'Mild depression';
      else if (total <= 14) interpretation = 'Moderate depression';
      else if (total <= 19) interpretation = 'Moderately severe depression';
      else interpretation = 'Severe depression';

      const suicidal = answers[8].includes("Not at all") ? "No" : "Yes";

      const summary =
        `PHQ-9 Total Score: ${total}\n` +
        `Interpretation: ${interpretation}\n` +
        `Suicidal Ideation (Q9): ${suicidal}\n\n` +
        answers.join("\n");

      document.getElementById("copy-output").value = summary;
    }

    function copyToClipboard(el) {
      el.select();
      el.setSelectionRange(0, 99999);
      document.execCommand("copy");

      const alertBox = document.getElementById("copy-alert");
      alertBox.style.display = "inline";
      setTimeout(() => {
        alertBox.style.display = "none";
      }, 2000);
    }
  </script>

</body>
</html>
